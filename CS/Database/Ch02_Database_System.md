# 01 데이터베이스 시스템의 구성요소

## ✅ 데이터베이스 시스템의 개념

- **`데이터베이스(DB; DataBase)`**: 저장소
- **`데이터베이스 관리 시스템(DBMS; DataBase Management System)`**: 데이터베이스를 관리하는 소프트웨어
- **`데이터베이스 시스템(DBS; DataBase System)`**: 데이터베이스와 데이터베이스 관리 시스템을 모두 포함하는 개념

## ✅ 데이터베이스 사용자의 분류

- 일반 사용자(초급, 중급)
- 응용 프로그래머
- 데이터베이스 관리자

### ✔️ 일반 사용자

= 최종 사용자(end user)

- 전문 지식 없이 데이터베이스를 접근하는 사용자 유형
- 초급 사용자: 데이터베이스나 DBMS의 존재를 알지 못하는, 관련 지식이 없는 사용자
- 중급 사용자: 데이터베이스 기본 지식을 갖추고, 필요한 경우 데이터 언어를 사용해 데이터에 대한 처리를 직접 DBMS에 요청

### ✔️ 응용 프로그래머

- 데이터베이스 전문 지식을 가지고 응용 프로그램(application)을 개발할 목적으로 데이터베이스를 접근하는 사용자 유형
- 프로그램 전문 개발자로 C, Java, JSP, PHP와 같은 프로그래밍 언어를 구사할 수 있고 작성한 응용 프로그램 안에 데이터 언어나 DBMS 실행 명령어 능력을 갖춘 사용자

### ✔️ 데이터베이스 관리자(DBA; DataBase Administrator)

= DBMS의 슈퍼 사용자(super user)

데이터베이스에 대한 모든 권한과 최종 책임을 갖는 전문가

- 데이터베이스를 구축하고, 데이터베이스 시스템을 자체적으로 운영/통제하는 소수의 사용자 유형
- 데이터베이스 시스템의 관리를 총괄(데이터베이스의 설계, 구축, 서비스, 운영 등을 위해 DBMS의 다양한 기능들을 활용함으로써 데이터베이스 시스템을 제어)
- 주요 역할
  - 데이터베이스 시스템의 구성 요소 선정
  - 데이터베이스의 구조 정의
  - 물리적 저장 구조, 접근 방법 결정
  - 무결성 유지를 위한 제약 조건 정의
  - 보안 및 접근 권한 정책 결정
  - 백업 및 회복 기법 정의
  - 시스템 데이터베이스 관리
  - 시스템 성능 감시 및 성능 분석
  - 데이터베이스의 재구성
  - 데이터베이스 관련 의견 조정과 분쟁 해결

## ✅ 데이터 언어 (data language)

- DBMS에 요청 내용을 전달하기 위한 도구
- 보통 데이터 언어는 표준 데이터베이스 언어인 SQL(Structured Query Language)을 의미
- 사용 목적에 따라 데이터 정의어(DDL), 데이터 조작어(DML), 데이터 제어어(DCL) 3가지 명령어 그룹으로 분류

### 1️⃣ 데이터 정의어(DDL; Data Definition Language)

- 새로운 데이터베이스 구조를 정의하고 기존 데이터베이스 구조를 변경하는 명령어 집합
- 데이터베이스 구조를 표현하는 **데이터베이스 스키마를 명세**하기 위해 사용
- 데이터베이스 설계자, 데이터베이스 관리자
- `CREATE`, `ALTER`, `DROP`

### 2️⃣ 데이터 조작어(DML; Data Manipulation Language)

- 데이터베이스 안의 데이터를 실제 조작하는 명령어 집합
- DBMS에게 데이터의 입력, 수정, 삭제, 검색 요청을 위해 사용
- 일반사용자, 프로그래머, 데이터베이스 관리자
- `INSERT`, `UPDATE`, `DELETE`, `SELECT`

### 3️⃣ 데이터 제어어(DCL; Data Control Language)

- 데이터베이스를 제어하고 통제하기 위해 사용하는 명령어 집합
- 데이터베이스가 안전하게 오류 없이 동작하고 성능을 유지하도록 각종 제약이나 옵션을 설정함으로써 DBMS가 데이터베이스를 올바르게 관리하도록 함
- 데이터베이스 관리자
- `GRANT`, `REVOKE`, `COMMIT`, `ROLLBACK`

## ✅ 데이터베이스 관리 시스템 DBMS; Database Management System

데이터를 효율적으로 관리하고 데이터베이스에 대한 데이터 요청을 처리하는 소프트웨어 시스템

- DBMS 구성요소: 질의 처리기, 런타임 데이터베이스 처리기, 데이터 저장 관리기

### ✔️ DBMS의 필수 기능

**1️⃣ 정의 기능**

DBMS는 필요한 모든 데이터를 저장하는 **통합 데이터베이스 구조를 생성**하거나 이미 생성된 구조를 **삭제** 또는 **변경**할 수 있도록 함

**2️⃣ 조작 기능**

DBMS는 데이터베이스 안에 저장된 데이터에 접근하여 원하는 **데이터 조작**을 할 수 있도록 함

사용자의 다양한 **입력, 수정, 삭제, 검색** 요청을 효율적으로 처리

3️⃣ 제어 기능

DBMS는 여러 사용자가 동시에 다양한 목적으로 접근하더라도 항상 데이터를 정확하고 안전하게 유지하도록 통제함

**사용자별 보안과 권한을 설정**하고 데이터 조작 과정 중 높은 동시성과 무결성을 유지하면서도 백업을 통해 장애 발생 시 필요한 회복 조치가 가능하도록 제어

## ✅ 데이터베이스 서버

데이터베이스가 구동되는 서버(server) 역할을 하는 컴퓨터

웹 애플리케이션 = 웹 서버 + 데이터베이스 서버

- 클라이언트/서버 컴퓨팅 환경
  - 사용자는 클라이언트 컴퓨터를 통해 접근
  - 데이터베이스 처리는 시스템 부하가 매우 크므로 → 보통 데이터베이스 시스템을 독립된 컴퓨터 안에 서버 형태로 운영
  - 데이터베이스 서버 안에는 데이터베이스가 물리적으로 저장되며, DBMS가 설치되어 다양한 요청이 처리됨
- 구축하고자 하는 정보시스템의 규모와 용도에 맞게 적절한 사양의 컴퓨터를 선택
  - 전통적으로 데이터베이스 컴퓨터는 고성능의 사양을 요구
  - 컴퓨터의 성능이 발전됨에 따라 현재는 일반 컴퓨터를 데이터베이스 서버로 활용하는 것이 가능한 환경이 됨

## ✅ 데이터 모델(data model)

데이터베이스 종류에 따라서 **다양한 저장 구조**를 갖게 되는데, → 이러한 데이터베이스 구조를 명세하기 위한 개념 틀(concept framework)

- 데이터 모델의 종류: 계층형, 네트워크형, 관계형, 객체 지향형, 객체 관계형 데이터 모델

### 1️⃣ 계층형 데이터 모델 (HDM; Hierarchical Data Model)

데이터 사이 연관 관계를 물리적 위치 정보인 **포인터**로 표현하는 저장 방식

- **트리 형태**의 계층 구조
- ✨ 검색 속도가 빠르기 대문에 일대다(1:n) 관계를 갖는 대용량 데이터베이스 처리에 유리
- 💩 다대다(m:n) 관계의 표현이 어려움
- 💩 데이터가 중복됨
- ex. IMS(Information Management System)

### 2️⃣ 네트워크형 데이터 모델 (NDM; Network Data Model)

데이터 사이의 연관 관계를 **포인터**로 표현하는 저장 방식 + 계층형 모델의 단점을 보완해 트리 구조를 **네트워크 형태**로 변환한 모델

- ✨ 검색 속도가 빠르고 다대다(m:n) 표현이 용이함
- 💩 물리적 저장 구조를 알아야 함
- 💩 구조 변경 시 응용 프로그램도 함께 변경되어야 함
- ex. IDS(Integrated Data Store)

### 3️⃣ 관계형 데이터 모델 (RDM; Relational Data Model)

데이터 사이의 연관 관계를 테이블의 **키(key) 열(column)**을 통해 표현하는 저장 방식

- **테이블 형태**의 저장 구조
- ✨ 연관된 데이터 사이에 **기본키, 외래키**를 통해 논리적 관련성을 표현 → 유연하고 이해하기 쉬움
- ex. Oracle, MS SQL, Access, Informix, MySQL, MariaDB

### 4️⃣ 객체 지향형 데이터 모델 (OODM; Object Oriented Data Model)

연관된 데이터 사이의 관계를 객체 식별자(OID; Object IDentifier)로 표현하는 저장 방식

- **객체 단위**의 저장 구조
- 클래스, 상속, 자료추상화, 캡슐화 등 객체지향 개념과 데이터베이스 개념을 통합하여 실세계와 유사하게 모형화하는 데이터 모델
- 구조적 측면에서는 계층형 또는 네트워크형 데이터 모델과 비슷함
- ex. O2, ONTOS, GemStone

### 5️⃣ 객체 관계형 데이터 모델(ORDM; Object Relational Data Model)

관계형 데이터 모델을 기본 개념으로 + 객체 데이터 모델의 객체 특성을 일부 반영

- 범용적인 관계형 데이터 모델을 기반으로 하면서, 필요한 경우 특정 분야를 위해 객체 개념을 추가로 지원

ex. 관계 DBMS 제품들이 객체지향 기능을 지원하면서 객체관계 DBMS로 분류되기도 함(Oracle)

## ✅ 데이터 모델과 DBMS의 관계

- DB 또는 DBMS를 분류하는 가장 중요한 기준은 데이터 모델
- 데이터 모델에 따른 DBMS의 역사

<br />

# 02 3단계 데이터베이스

## ✅ 스키마(schema)

데이터베이스 안에 저장되는 **데이터 구조와 제약 조건 등을 정의**한 것

- 데이터베이스의 정적인 구성 + 동적인 유지 조건
- 동일한 데이터베이스라도 **접근 관점에 따라 스키마는 다를 수 있음**
- 주로 데이터 구조에 관심을 가지므로 → 스키마의 세부 제약조건보다는 릴레이션 구조만을 간략히 명세
- 테이블 이름, 열 이름으로만 간단히 스키마를 명세
  - ex. `학생(학번, 이름, 학년, 성별)`

## ✅ 3단계 데이터베이스 구조 (3-level database architecture)

ANSI에서 제시한 방법(ANSI/SPARC 3단계 아키텍처)

데이터베이스를 보는 관점을 3가지 단계로 분리

### 1️⃣ 외부 스키마

**사용자가 외부에서 바라보는 관점**에서의 개인적 데이터베이스 구조를 정의한 것

- 데이터베이스 전체가 아닌 데이터베이스 **일부만을 대상**으로 한정하여 명세한 구조
  - 일반 사용자, 응용 프로그래머 차원에서 접근하는 **일부 데이터베이스**의 논리적 부분을 표현
  - **서브 스키마(sub schema)**라고도 부름
- 각 **사용자별**로 외부에서 바라보는 관점은 다양하므로 **여러** 외부 스키마가 존재

### 2️⃣ 개념 스키마

모든 사용자들의 관점을 통합하여 전체 조직 관점에서 데이터베이스 구조를 정의한 것

- 조직이나 기관의 데이터베이스 전체를 명세한 구조
- 보통 스키마라고 하면 개념 스키마를 의미
- 데이터베이스에는 하나의 개념 스키마만 존재

### 3️⃣ 내부 스키마

저장 장치 관점에서 **전체 데이터베이스의 내부 구조**를 정의

- 개념 스키마에 대한 시스템 내부의 저장 방식 표현
- 내부 레코드 형식이나 **배치 방법, 인덱스** 등에 대한 명세 포함
- 내부 스키마도 데이터베이스 당 하나만 존재
- 실제 장치의 물리적 저장 방식이나 구조를 명세한 것은 아니며 그보다는 **추상화**된 상위 표현

## ✅ 데이터 사전

DBMS는 **`스키마`**, **`스키마 사상 정보`**를 **`데이터 사전(data dictionary)`**이라는 별도 저장소에 관리

- 다양한 **데이터베이스 객체**(테이블과 열, 뷰, 인덱스, 사용자 권한 등)에 관한 모든 데이터 포함
- DBMS가 스스로 생성하고 유지함
- 사용자 뿐만 아니라 시스템 관리를 위해서도 필요한 저장 공간 → 그 자체가 하나의 데이터베이스

### ✔️ 사용자 데이터베이스(user database)

사용자나 응용 프로그램이 실제로 이용하는 데이터를 저장하는 일반 데이터베이스

### ✔️ 시스템 데이터베이스(system database) 또는 시스템 카탈로그(system catalog)

- **데이터 디렉토리(data directory)**
  - 사용자가 접근할 수 없음
  - 데이터 접근에 필요한 위치 정보를 저장하는 저장소
- **데이터 사전 (data dictionary)**
  - 데이터베이스에 저장된 모든 부가 정보(데이터베이스 정의, 명세, 스키마, 스키마 사상정보, 제약조건 등)를 저장하는 저장소
  - 메타 데이터
    - 데이터를 자체에 관한 데이터
    - DBMS뿐만 아니라 일반 사용자도 검색할 수 있지만, 변경은 DBMS만 가능

## ✅ 데이터 독립성(data independency)

- 데이터의 논리적/물리적 구조가 변경되더라도, **응용 프로그램이 영향을 직접 받지 않는 특성**
- 기존 응용프로그램에 영향을 주지 않으면서 데이터베이스 구조를 변경할 수 있고, 데이터베이스에 영향을 미치지 않으면서 응용프로그램을 수정할 수 있음
- 3단계 데이터베이스 구조는 응용 프로그램과 데이터 사이의 독립성을 제공
- 각 단계의 **스키마 사이에 적절한 내부 사상**을 한다면 하위 스키마가 변경되더라도 상위 스키마에 영향을 주지 않도록 변경 내용을 숨길 수 있음

### ✔️ DBMS의 데이터 독립성 제공

- DBMS의 핵심 역할 중 하나
- DBMS는 3단계 데이터베이스 구조의 스키마 간의 적절한 사상을 통해 데이터 독립성 지원

### ✔️ 외부/개념 사상

- 외부 스키마를 변경하더라도 전체 개념적 스키마는 변경되지 않거나, 변경되더라도 변경 내용을 최소화함으로써 다른 응용프로그램에 주는 영향을 최소화
- 논리적 데이터 독립성(logical data independency) 제공
  - 응용 프로그램의 영향을 최소화 & 데이터베이스 논리적 구조 변경
  - DBMS에 의해 수행되는 외부/개념 사상
  - 하나의 개념 스키마를 여러 외부 스키마 형태로 사상시킴으로써 가능

### ✔️ 개념/내부 사상

- 물리적 구조의 변경에 따라 내부 스키마가 수정되더라도, 연관된 개념/내부 사상 정보만 수정하면 상위 스키마에 대한 영향을 최소화
- 물리적 데이터 독립성(physical data independency) 제공
  - 개념적 스키마에 영향 최소화 & 데이터베이스 물리적 구조 변경
  - DBMS에 의해 수행되는 개념/내부 사상
  - 하나의 개념 스키마와 내부 스키마 사이의 사상을 통해 가능
