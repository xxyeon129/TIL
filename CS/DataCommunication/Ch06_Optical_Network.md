# 01 광 네트워크 개요

- **대용량의 트래픽**을 전달할 수 있는 / **초고속 네트워크 인프라 요구**
- 1980년대 후반 ~ 1990년대 초반 / 고속전송의 실현을 위해 동축케이블의 대체안으로 / **광섬유**의 다양한 사용이 시작
  - 당시 네트워크에서 데이터의 스위칭과 전달 과정은 전기적으로 수행
  - SONET과 SDH
  - 대역폭을 확장하기 위해서는 새로운 시스템을 다시 설치해야 하는 제약
- (파장의 추가로 대역폭을 증가시키는) WDM(Wavelength Division Multiplexing) 기반의 광 네트워크는 / 저비용으로 많은 대역폭을 수용
  - WDM; 파장분할 다중화:
    - 광섬유의 저손실 파장대역을 **여러 개의 채널 파장대역으로 분할**하여 / 각 입력 채널마다 하나의 파장대역을 할당하고,
    - 입력 채널 신호를 각기 할당된 채널 파장대역으로 동시에 전송하는 광 다중화 방식
- 파장(wavelength): 공간에 퍼져 있는 파동의 한 주기가 가지는 길이
  - 단위: 람다

<br />

# 02 광 섬유 (Optical Fiber)

## ✅ 개요

- ✨ 빛을 이용해 정보를 보내기 때문에 → **전기적인 간섭을 받지 않음**
- ✨ **외부 전자기장의 영향을 받지 않음**
- ✨ 매우 **높은 전송 속도**를 제공
- ✨ 데이터의 **오류 발생 가능성**이 (1Gbit당 1bit) **매우 적음**
- ✨ **보안성**이 큼
- ✨ **크기가 작고 가벼움**
- 💩 **설치와 케이블 접속 시 고도의 기술**이 요구됨

## ✅ 광섬유 구조

- 코어(core): 광 신호 자체를 운송
- 클래드(clad): 광 신호를 코어에 유지하는 역할
- 코팅(coating)

## ✅ 광섬유 종류

### 단일 모드(single mode) 광섬유

- 중계 장치 없이 수 마일의 거리를 **고속으로 전송**
- **장거리 통신**에 주로 사용
- 직경이 작은 코어 → 광 펄스의 변질을 최소화

### 다중 모드(multi mode) 광섬유

- 한 가지 이상의 광 모드 전송
- **최대 속도 제한**
- 접속이 쉬워 → (다중 접속이 필요한) **단거리 통신** 네트워크에 자주 사용

## ✅ 광섬유 발전과정

- 초기의 광 네트워크: 광전, 전광 장비는 데이터의 속도를 느리게 하고 비용 부담을 가중
- 광 증폭기의 발전: 광 신호를 전자 신호로 변환하지 않고 직접 증폭

## ✅ 파장분할 다중화

파장분할 단위를 1nm 기준으로 할 때

- **채널 간격**이 이보다 **크면** → **저밀도 파장분할 다중화(CWDM**; Coarse Wavelength Division Multiplexing)
  - CWDM의 채널은 1270nm~1610nm 사이 주파수에 위치
  - CWDM 기술은 10nm~20nm 기준으로 사용됨
- **채널 간격**이 이보다 **작으면** → **고밀도 파장분할 다중화(DWDM**; Dense Wavelength Division Multiplexing)
  - 광섬유 한 가닥에 여러 개의 서로 다른 파장(색깔)을 사용해 여러 데이터 스트림을 동시에 전송하는 기술
  - DWDM 채널은 C대역(1530nm ~ 1565nm) 주파수 범위를 일반적으로 사용
  - DWDM 기술은 0.8nm 또는 0.4nm간격으로 진행
  - 빛은 이 주파수에서 광섬유의 **감쇠가 더 낮고 더 멀리 이동 가능**

### ✔️ 레이저

- 레이저는 **더 높은 온도에 도달**하면 → 다른 주파수로 빛을 전송하므로 / 좁은 주파수 창에서 이동할 수 있다
- DWDM 시스템은 파장 간격이 좁기 때문에 / 채널 간격이 더 넓은 CWDM보다 더 안정적인 주파수를 유지해야 한다
  - 이 문제를 해결하기 위해 **냉각 레이저**를 사용해 → 더 오랜 기간 동안 정확도를 보장
  - → 💩 더 높은 전력 사용량, 복잡한 구조 → DWDM을 실행할 때 높은 비용 발생 가능

### ✔️ 도달거리

- CWDM 신호는 증폭할 수 없지만, 신호는 최대 18km거리에 대해 18 ITU 채널을 통해 전달할 수 있다.
  - 대도시 지역의 네트워크를 위한 저렴한 솔루션으로 제안됨
- DWDM은 장거리 및 해상 케이블 시스템의 건설에 적합한 3000km 이상 거리에 도달하도록 EDFA(Erbium-Doped Fiber Amplifier) 또는 RFA(Raman Fiber Amplifier) 증폭기를 사용해 증폭될 수 있다. (증폭기 사용 → 광손실 줄어듦)
  - 그러나 DWDM 신호의 품질은 광섬유의 감쇠로 인해 지속적으로 저하되고, 신호가 증폭되면 잡음도 증폭된다.

### ✔️ 대역폭

고밀도(DWDM)가 저밀도(CWDM)보다 채널당 **더 많은 대역폭 전달** 가능

(DWDM은 400Gbps에 도달 가능, CWDM 최대값은 100Gbps)

짧은 거리에서 더 높은 대역폭 전송 → DWDM

<br />

# 03 LAN에서의 광 네트워크

## ✅ 광 LAN과 광 네트워크

- 공장, 빌딩, 캠퍼스 등에서 설치되는(대규모 LAN 환경) **기가 비트급 전송 속도의 광 전송 네트워크**
- LAN에서 광의 사용은 FDDI(Fiber Distributed Digital Interface) 기술 등장부터 시작
  - 과거 분할된 다양한 LAN들을 고속의 백본으로 통합시킬 때 사용

### 광 이더넷

- 광섬유를 기반으로 이더넷 기술을 사용하는 형태
- 기존 구리선 기반보다 빠른 속도, 장거리 전송이 가능
- 대규모 연결: 대다수의 PC가 동일 LAN에 연결 가능
- 저비용, 고신뢰성, 빠른 속도
- LAN을 넘어 → MAN(도시권)과 WAN(광역)까지 확장

## ✅ 기가비트 이더넷 기술

### ✔️ 10기가 비트 이더넷(10GbE) 기술

- **속도:** 기존 이더넷 기술의 장점을 수용하면서 / 광 채널을 위해 표준화하여 10Gb 속도 제공 (LAN의 속도 대폭 개선)
- **범위 확장:** LAN뿐만 아니라, WAN(광역 네트워크), MAN(도시권 네트워크)에서도 사용 가능
- ✨ 기존 LAN 방식(이더넷)과의 호환성 유지
- ✨ 추가적인 광 전송 장비(SONET/SDH)를 거치지 않고도 광섬유를 통한 네트워크 구축 가능

### ✔️ 케이블 특성에 따른 기가비트 이더넷과의 관계

- **멀티모드:** 단거리 전송에 적합
  - 주로 소규모 데이터 센터에서 사용
- **싱글모드:** 장거리로 전송 가능

### ✔️ 10GbE over Fiber (광섬유를 통한 10GbE)

- 40~100km까지 직접 연결 가능
- ✨ SONET/SDH나 DWDM 장비 이용 없이 이더넷 방식만으로 네트워크 구성 가능
- ✨ 프로토콜 변환에 대한 오버헤드(추가 부담)가 없음
- ✨ 다크 파이버를 이용하는 경우 → 적은 시간, 비용으로 네트워크 구축 가능
  - 다크 파이버: 현재 사용되지 않고 비활성화된 광섬유 케이블
- 💩 다양한 네트워크와 MAN에 대한 공유가 불가능
- 💩 변화하는 수요에 대한 유연성이 떨어짐

### ✔️ 10GbE over DWDM (고밀도 파장분할 다중화를 통한 10GbE)

- 대용량 DWDM으로 구성된 전송 네트워크에서 **SONET/SDH를 사용하지 않고 / 직접 파장을 할당** 제공할 수 있는 10기가비트 장비로 코어에 접속
- ATM, SONET들과 DWDM 네트워크 공유가 가능
- 💩 투자 비용이 높음
- 💩 운영 안정성과 장애 복구 어려움

> [!NOTE]

</aside>

> [!NOTE]
>
> SONET/SDH: 미국식/유럽식 광 네트워크 표준
>
> 기존 네트워크에서는 대규모 광 네트워크를 운영할 때 **SONET/SDH** 장비를 사용해 데이터의 **동기화 및 전송 제어**를 수행
>
> - 그러나 DWDM 기반 10GbE는 별도의 SONET/SDH 없이도 **직접 파장을 할당**해 전송이 가능
> - “파장을 할당한다”
>   - 네트워크의 각 데이터 흐름(10GbE 흐름)이 특정 파장(예: 1550nm)을 사용하도록 설정한다 → 이로써 전송 효율을 높이고 비용을 줄인다

## ✅ 광 네트워크와 이더넷 기술의 발전

- 24.10 기준 상용화된 광이더넷의 최고 속도는 400Gbps, 800Gbps
- 최신기술로는 1.6Gbps 이상의 속도가 가능
- 광이더넷 기술은 대용량 데이터 전송이 필요한 데이터 센터, 클라우드 서비스, 통신 인프라에 주로 사용

<br />

# 04 SONET/SDH

## ✅ SONET/SDH 개요

SONET(Synchronous Optical NETwork; 동기식 광 네트워크): 미국 표준

SDH(Synchronous Digital Hierarchy; 동기식 디지털 계층): 국제 표준(ITU-T)

- 둘 다 **동기식 광 네트워크 표준 프로토콜**
- **광 섬유를 통해 디지털 데이터를 동기적으로 전송**하는 데 사용
- 빛 신호(레이저 또는 LED)를 사용한 광섬유를 통해 데이터 전송

**[동기식 전송 방식]**

- 데이터 전송 시 일정한 시간 간격(동기화)으로 데이터 전송
- ✨ 효율적인 다중화가 가능
  - 다중화: 여러 데이터 신호를 통합 전송 (여러 데이터 스트림을 하나의 고속 채널로 묶는 기술)
- ✨ **정수 배 데이터율**을 기반으로 설계되어 → 데이터 처리 속도가 일정, 다중화 작업이 단순화
  - 정수 배 데이터율: 기본 전송 속도의 정수 배로 전송 속도를 증가시키는 방법

**[회선 교환 기반으로 설계]**

- SONET/SDH는 각 연결에 대해 전용 대역폭을 할당해 → 전화, 데이터, 비디오 서비스를 통합적으로 제공
- **각 연결이 고유의 광 경로**를 가지므로 → 서비스 품질이 높고 안정적
  - 복잡성과 운영 효율성을 높이기 위해 전용 대역폭을 사용하도록 설계
  - 각 데이터 흐름에 **단일 파장을 사용**하며, 전송 경로가 고유함
  - cf. 이더넷: 효율적인 네트워크 활용을 위해 사용량이 많을 때 채널 초과 구독

**[ADM(Add/Drop Multiplexer)]**

- 특정 구간에서 데이터를 추가하거나 제거할 수 있는 장치
- 빠른 Add/Drop 작업 가능 → 네트워크 효율성 개선
  - 특정 데이터 스트림을 기존 데이터 흐름에 추가(Add)하거나, 기존 데이터 흐름에서 제거(Drop)하는 작업

**[전송 속도]**

- 최소 51.84Mbps ~ 최대 2.5Gbps까지 전송 가능
- 광대역 통신에 주로 사용
- 현재까지 광 통신의 표준

## ✅ SONET/SDH 동기 전송 신호 (STS와 STM)

STS와 STM 모두

- **계위(계층) 구조**를 통해 점진적으로 다중화 가능
  - 다중화기 사이 네트워크 요소들 간에 계층이 구분
  - 각 노드들은 필요한 오버헤드만을 검사하여 투명한 데이터 전송이 가능
- 동기식 전송 방식을 따름

### ✔️ STS(Synchronous Transport Signal)

SONET에서 사용하는 기본 프레임 신호 계위(계층 구조)

- **STS-1**: 기본 속도 **51.840 Mbps**를 제공.
- 신호의 전송 속도가 올라갈수록 STS-3, STS-12 등으로 확장

### ✔️ STM (Synchronous Transport Module: 동기식 전송 모듈)

SDH(국제 표준)에서 사용되는 신호 계층

- SONET의 STS보다 대역폭이 3배 큼
- SDH의 국제 표준에서 정의된 신호 계위(계층 구조)
- 하위 계위 신호(STM-1)들이 상위 계위 신호(STM-4, STM-16 등)로 **체계적으로 다중화**

### 동기식 전송 방식

하나의 클럭을 이용하여 → 네트워크 간 전송을 처리

- 네트워크 전체가 하나의 기준 시간(클럭)을 따라가기 때문에 데이터 전송과 처리 타이밍이 일정함

### 동기식 다중화

- 다중화와 역다중화가 기술적으로 쉽고 단순함
  - 동기식 방식은 데이터 신호들이 동일한 클럭을 따름 → 서로 간의 타이밍을 맞추는 추가 작업이 필요하지 않음
- 모든 신호들이 다중화 과정을 거치지 않아도 / 저속 신호에 직접 접근이 가능함
  - 특정 신호를 추출하거나 삽입할 때, 모든 데이터를 역다중화하지 않아도 됨

### 오버헤드(overhead) = 헤더(Header)

> [!NOTE]
>
> 오버헤드는 데이터 전송 과정에서 **payload를 보조하는 추가 정보**
>
> 이 정보는 데이터의 신뢰성과 안정성을 확보하며, 헤더에 위치하여 전송 경로와 데이터 속성 같은 필수 정보를 담음

오버헤드는 데이터 전송 과정에서 추가적인 정보 → 실제 데이터(payload)의 전송을 보조하는 역할

- 목적: **정보 전송의 신뢰성 확보** 및 **시스템의 안정적 운용** 등을 위함
- 성격: 오버헤드는 payload(실제 전송 데이터)와 함께 전송되며,
  데이터 전송의 운용 및 유지보수를 위한 신호를 포함함 - ex. 전송 경로 정보, 데이터의 속성, 출발지/도착지 주소 등
- **헤더:** 일반적으로 오버헤드는 **헤더(Header)에 위치**함
  - 데이터 패킷이나 프레임의 맨 앞부분에 위치
  - 전송 경로 정보, payload 속성 등 포함
  - 프로토콜마다 그 길이와 형식이 모두 다름
  - ex. MAC 헤더, IP 헤더, TCP 헤더, DNS 헤더, HTTP 헤더 등
- **꼬리(Tail, Trailer):** 매 프레임마다 에러 검출을 위해 맨 뒤에 덧붙이는 것
  - 일반적으로 꼬리 필드부는 2계층 프로토콜에는 많이 사용하나,
    3계층(IP 등)부터는 거의 사용하지 않음

## ✅ SONET 네트워크 구성

SONET 네트워크는 STS MUX와 재생기, ADM이 상호 연결되어 있는 망

### ✔️ STS MUX(다중화기/역 다중화기)

STS 계위에 따라 다중화/역 다중화를 수행

### ✔️ 재생기(Regenerator)

광 신호를 재생

- 일종의 리피터
- 단순히 재생 기능만 하는 것이 아니라, 기존 오버헤드 정보를 일부 변경하는 기능도 수행

### ✔️ ADM(Add/Drop Multiplexer)

SONET/SDH 네트워크에서 **데이터를 효율적으로 관리**하는 장치

데이터를 필요한 곳으로 전달(Drop), 새로 추가(Add), 통과(Bypass) 시키는 장치

- **Drop(빼기):**
  - 네트워크를 통해 전송되는 데이터 중, **특정 노드로 보내야 할 데이터를 빼내어 전달**
  - ex. 전화국에서 지역 사용자에게 데이터를 전송
- **Add(더하기):**
  - 특정 노드에서 생성된 데이터를 **SONET/SDH 네트워크로 추가하여 전송**
  - 특정 노드에서 → SONET/SDH 선로로 전송하는 데이터들을 / ADM에서 선로에 더함
  - ex. 지역 사용자가 송신한 데이터를 네트워크에 추가
- Bypass(통과):
  - 네트워크를 통해 전송된 데이터 중, 해당 노드와 관련 없는 데이터는 **변경 없이 그대로 통과**시킴
  - ex. 다른 지역으로 전송되는 데이터는 건드리지 않고 지나가게 함

(SONET/SDH 선로로부터 유입되는 데이터 중) 자신과 연결되어 있는 노드를 향해 전송되고 있는 데이터는 해당 노드로 빼주고(Drop), 해당 노드에서 SONET/SDH 선로로 전송하는 데이터들을 ADM에서 선로에 더하면서(Add) ADM을 그냥 지나가는(Bypass) 데이터들과 다중화

### 링 구조

이중 링 구조의 SONET/SDH 네트워크는 일반적으로 사용되는 MAN 또는 백본망을 간략히 표현한 것

- **단방향 링형 망**
  - 데이터를 전송하는 워킹 채널과
  - 망 복구를 위해 사용되는 보호 채널이
  - 이중 링에서 각각 반대 방향으로
  - 하나의 링에 하나의 채널만이 사용되는 방식
- **양방향 링형 망**
  - 이중 링의 하나의 링에서 워킹 채널과 + 보호 채널이 반반씩 대역폭을 나누어 사용
  - 4중 링에서는 두 개의 선로는 워킹 채널로, 나머지 두 개의 선로는 보호 채널로 전송 가능

> [!NOTE]
> 단방향 링은 사용하지 않고, 양방향 링을 사용

## ✅ SONET/SDH 계층 (4)

SONET/SDH 망의 네트워크 구성 요소들은 각각이 서로 다른 계층을 다룸

SONET 데이터 캡슐화

### 1️⃣ 포토닉 계층(Photonic Layer)

- OSI 7 계층의 **물리 계층**에 해당
- 광섬유를 통해 전달하고자 하는 신호들의 코딩방식이나 채널 등의 **물리적 규격**을 포함
- 전자신호를 → 광 신호로 변환하여 0/1의 신호를 전송

### 2️⃣ 섹션 계층(Section Layer)

- OSI 7 계층의 **데이터 링크** 계층이 수행하는 / 에러 제어(Error Control), 프레이밍(Framing) 및 스크램블링(Scrambling) 등의 처리를 수행

### 3️⃣ 라인 계층(Line Layer)

- STS(Synchronous Transfer Signal) MUX가 **다중화 기능**을 위해 사용하는 층
- **통신 신호를 제어**

### 4️⃣ 패스 계층(Path Layer)

- SONET 계층의 마지막 층 → SONET 망의 양단간에 송신단과 수신단을 구별
- STS(동기전송신호)가 목적지를 판단하여 다중화하는 역할 수행

## ✅ STS(Synchronous Transfer Signal)-n 프레임

SONET에서 데이터 전송은 STS-1 프레임(51.84 Mbps)을 기본 단위로 하며, 이를 배수(x n)로 다중화하여 → 더 높은 대역폭의 데이터를 처리

- **STS-1**: SONET의 기본 신호 계위로, 51.84 Mbps의 전송 속도를 가짐.
- **STS-n**: STS-1의 배수로 다중화된 신호. 예를 들어, STS-3은 3배(155.52 Mbps).
- **STM-n**: SDH에서 동일한 개념으로 사용되는 신호 계위.

### STS-1 프레임 구조 (섹션/라인/패스 오버헤드)

STS-1 프레임 기본적 형식: STS-n을 1/n로 축소한 것과 같음

- 가로 90byte, 세로 9byte 구조
- 왼쪽에서 오른쪽으로, 위에서 아래의 순서대로 전송

### ✔️ 섹션 오버헤드 (구간 오버헤드)

**전송 성능 및 유지보수를 위한 9byte 추가 정보**

재생기나 다중화기에서 STM(Synchronous Transport Module)-n 신호의 운용 유지 목적으로 삽입, 추출되는 오버헤드

- 목적: 전송 성능 표시, 다중화, 절체(단선), 신호재생, 운용 및 유지보수 등
- 구성: 섹션 오버헤드는 9byte로 구성되며, 재생기마다 오버헤드를 확인

- 정렬 byte (A1과 A2: Alignment byte): 프레임 생성과 동기화
- 식별 byte (C1: Identification): STS-1 프레임 식별
- 패리티 byte (B1: Parity byte): BIP-8(Bit Interleaved Parity) 방식을 사용해 재생기 구간 간 데이터 오류를 감지
  - 짝수 패리티 검사로 데이터 무결성 확인
- 오더와이어 byte (E1: OrderWire byte: 타협선): 64kbps 채널 형성
  - 통신 시스템, 네트워크 및 서비스의 활성화, 비활성화, 재구성, 보고 및 유지관리와 관련된 조정 및 제어기능 담당
- 사용자 byte (F1: User): 구간레벨에서 사용자 필요에 따라 예비된 64kbps 채널 형성
- 데이터 통신 byte (D1, D2, D3: Management byte): 데이터 통신 채널 구성

### ✔️ 라인 오버헤드(회선 오버헤드)

- 포인터 byte(H1, H2, H3: Pointers): 포인터
- 라인 패리티 byte (B2: Line Parity byte): 프레임 오류 검사용
- **자동보호 절체 바이트**(⭐ **K1과 K2**): 장비 내 문제의 자동 검출을 위한 채널 형성
  - SONET/SDH 네트워크에서 장애 발생 시 → APS(Automatic Protection Switching) 매커니즘을 통해 / 빠르게 전송 경로를 복구하는 역할을 함
  - APS(Automatic Protection Switching):
    - 네트워크에서 전송 장비나 선로에 장애가 발생했을 때 → 데이터를 손실 없이 신속하게 다른 경로로 전환하는 기능
    - 오버헤드 바이트(K1, K2)를 사용하여 → 장애를 감지하고, 대체 경로로 데이터를 전송
      - K1 byte: 경로 지정 → 장애가 발생한 위치 / 보호 경로를 지정
      - K2 byte: 상태 조율 → 전환 상태를 알리고, 전송 장비 간 협력을 조율
    - 50m 이내로 장애를 복구하는 높은 신뢰성을 목표로 설계
- 데이터 통신 채널 byte(D4~D12): 회선에서 채널 형성
- 성장 byte(Z1, Z2: Growth byte): 예비용
- 오더와이어 byte(E2: Orderwire byte 타협선 바이트): 회선 레벨에서 채널 형성

### ✔️ 패스 오버헤드(경로 오버헤드 POH; Path Overhead)

SONET/SDH 네트워크에서 **VC(가상 컨테이너)** 단위의 데이터를 **종단 간(end-to-end)** 전송할 때 사용하는 추가 정보.

- 목적: 종단 간 VC 데이터의 **오류 감지, 상태 추적**, 사용자 정의 기능 제공
- 생성 시점: **VC가 구성될 때 삽입**되며, 송신부터 수신까지 유지됨
- 다중화된 데이터에서도 VC가 end-to-end 통신을 유지하도록 관리

> VC(가상 컨테이너)가 조립 및 해체되는 노드 사이의 종단 간(end-to-end) 통신용.
>
> 해당 VC가 구성될 때마다 삽입됨. 해당 경로의 상태 정보를 지님

- 패스 추적 byte (J1: Path trace byte): 경로 추적에 사용되는 채널 형성
- 패스 패리티 byte (B3: Path Parity byte): 비트 교직 패리티
- 패스 신호표지 byte (C2: Path Signal Label byte): 경로 식별 패리티
- 패스 상태 byte (G1: Path status byte): 수신기가 보낸 상태 전달
- 패스 사용자 채널 byte (F2: Path User Channel byte): 경로 레벨에서 필요한 64kbps 채널 형성
- 가상종속 지시자 (H4: Virtual tributary indicator): 한 프레임 안에 수용될 수 없는 payload 표시
  - 가상 종속(VT; Virtual Tributary):
    - SONET 방식의 경로 계층(Path Layer) 내에서 운반되는 동기식 신호 단위
    - 하나의 STS-1 프레임 내 여러 개의 VT들로 그룹화됨
- 성장 byte (Z3, Z4, Z5: Growth byte): 예비용

## ✅ STS 프레임 다중화

SONET에서 데이터율을 높이기 위해 STS-1(51.84 Mbps)을 **다중화**하여 **더 높은 데이터율** 지원.

- ex. STS-1 데이터율을 더 높은 데이터율을 지원하는 장비와 호환하기 위하여 다중화될 수 있음 (3개를 묶어 STS-3)
