> [!NOTE]
>
> - Dynamic IP(동적 IP): 접속할 때마다 IP가 바뀜. 공인IP에 속함. IP가 바뀌니까 서버 구축은 안된다
> - (공유기를 사용한) 내부 IP: NAP(Network Address Translation; 네트워크 주소 결정). 내부에서만 사용하는 IP. 비공인IP.
> - IP는 컴퓨터의 주소를 지정하는 것. IPv4와 IPv6가 있음 v는 version을 의미.

<br />

# 01 IPv6 개요

IPv4: _ . _ . * . *라고 할 때 앞 3바이트는 네트워크, 뒤 1바이트는 호스트

## IPv4의 한계

- IP 주소 수요 증가로 → **주소 고갈 문제** 발생
- **Class 단위 주소 할당 방식**으로 인한 → **주소의 낭비**
- 다양한 서비스 제공, 보안 기술 등 **새로운 요구 사항 등장**

## IPv6의 등장

- 기존 IPv4의 32비트 주소길이를 **4배 확장한 128비트** 주소 길이를 사용
- **보안, 라우팅 효율성 문제**, ⭐ **QoS(Quality of Service) 보장**, 무선
- 인터넷 지원 등 다양한 기능들 제공

<br />

# 02 IPv6 특징 (5)

## 1️⃣ 확장된 주소 공간

- 128비트의 주소 공간
  - IPv4 주소 부족 문제를 해결할 수 있을 만큼의 주소공간
  - NAT(Network Address Translation)와 같은 **주소 변환 기술도 불**필요
- `유니캐스트(Unicast)`, `애니캐스트(Anycast)`, `멀티캐스트(Multicast)` 주소 형태
- 주소 자동 생성 기능을 지원
  - IPv4=**10진수** 표기, 8bit\*4=32bit
  - IPv6=**16진수** 표기, 16bit\*8=128bit

## 2️⃣ 새로운 헤더 포맷

- IPv4의 **일부 헤더 필드를 삭제하고 `확장 헤더`를 도입**
  - 패킷을 중계하는 라우터들의 부하를 줄임
- IPv4의 **가변길이 헤더를 고정 길이로 변경**
  - IPv4의 가변길이 패킷과의 호환을 위해 확장헤더 사용
- **패킷 단편화 관련 필드 삭제**
  - 라우터의 부담을 줄이고, 네트워크의 효율적 이용
  - 경로 MTU(Maximum Transmission Unit, 최대전송단위) 탐색 기능 사용
- 헤더의 **체크섬(checksum) 필드 삭제**

## 3️⃣ 향상된 서비스의 지원

- **응용 프로그램의 특정 서비스 품질(QoS) 요구**
  - 실시간 트래픽 및 비실시간 트래픽 구분
- **IPv6 헤더 내에 `플로우 레이블(Flow Label)` 필드 정의**
  - 트래픽 플로우에 대한 구분을 수행
  - 실시간 서비스 등과 같은 우선권을 주기 위해 → 특정 트래픽 플로우에 대한 라벨링

## 4️⃣ 보안 기능

- IPv6는 프로토콜 내에 **보안 관련 기능을 탑재**
  - ⭐ **IPSec(Internet Protocol Security)**
  - 보안과 관련된 인증 절차, 데이터 무결성 보호, 메시지의 발신지 확인 등 기능 제공
    - 데이터 무결성(Data Integrity): 시스템에 있는 데이터의 정확성, 완전성, 일관성
  - IPv6 **확장 헤더**를 이용해 **네트워크 계층에서의 종단간 암호화** 제공
  - InfoSec, IPSec (Security) 이라고도 함

## 5️⃣ 주소 자동설정

> [!NOTE]
> 네트워크를 1로 만들어주는 값 = subnet mask
>
> - 네트워크를 구분해줌
> - 네트워크 1111.1111.1111.0000 → 10진수로 표현하면 255.255.255.0
> - `/24` → prefix
> - CIRD: 클래스 없는 할당 방식

- LAN상의 **MAC(Medium Access Control) 주소**와 + (라우터가 제공하는) **네트워크 prefix**를 결합하여 → **IP 주소 자동설정**
- ✨ 시스템 관리나 설정에 필요한 **비용과 시간을 줄여줌**
- ✨ **사용자에게 편리함** 제공
  - ex. 이동형 컴퓨터에서 어느 곳에서든 네트워크와 연결을 하면 자동으로 포워딩 주소 설정

### 상태 보존형 자동설정 (Stateful auto-configuration): 상태 기반

- DHCP(Dynamic Host Configuration Protocol): 서버로부터 주소를 비롯한 **모든 네트워크 정보를 얻음**
- ✨ 주소의 **이용 효율성** 향상
- ✨ 호스트의 인증과정 등을 이용하여 **보안성 유지**
- 💩 서버의 **설치 및 구성**과 **관리가 복잡**
- 💩 **대규모의 데이터베이스**를 구축

### 비상태형 자동설정(Stateless auto-coniguration)

- **호스트 측에서 스스로 주소를 생성**
- 호스트가 자신의 인터페이스 정보와 라우터로부터 얻은 네트워크 프리픽스 정보 또는 well-known 프리픽스 정보를 이용하여 **자체적으로 IPv6 주소 생성**
- ✨ 특별한 **서버가 필요 없음**
- 💩 이용 권한 없는 호스트의 접근 등으로 인한 **보안 관련 문제**

<br />

# 03 IPv6 주소

## ✅ 주소 표기

16진수 콜론 표기법

128bit → 16bit씩 8개 필드로 나누어 `콜론(:)`으로 구분

## ✅ 주소 생략법

0의 값을 포함하는 주소에 대한 주소 생략법

- 각 필드에서 선행하는 0은 생략 (0221 → 221, 00AB → A, 0000 → 0)
  - 단, 뒤에 나오는 0은 생략 불가
- 0으로만 나타난 연속된 필드는 0을 모두 삭제하고 / 2개의 콜론(이중콜론)만으로 나타냄
  - `::` 기호를 사용하는 경우 → 주소당 한 번만 허용
  - `::`는 주소 내 선행,수행 관계없이 사용
- IPv6 + IPv4 함께 표현하는 경우
  - x:x:x:x:x:x:d.d.d.d
  - 하위 32bit를 IPv4 형식으로 표기

## ✅ 주소 프리픽스 표현 방법

(prefix: 전두사, suffix: 접미사)

IPv6 주소 뒤에 `/`를 표기하고, prefix의 길이를 10진수의 숫자로 표기

## ✅ 주소 형태

### ✔️ 유니캐스트(Unicast) 주소

1:1 통신 시 서로 간의 인터페이스를 식별하는 주소

### ✔️ 글로벌 유니캐스트 주소

- 인터넷 상의 호스트를 구별할 수 있는 **세계적으로 유일한 주소**
- 첫 세 비트가 000으로 시작되는 경우
  - 인터페이스 ID 필드의 크기가 고정되어 있지 않음
- 첫 세 비트가 000으로 시작되지 않는 경우
  - 64bit의 인터페이스 ID 필드
  - 통합 글로벌 IPv6 유니캐스트 주소

### ✔️ 로컬 유니캐스트 주소

- 글로벌에 주소에 대한 절약과 특정 사이트 내에서의 **보안문제를 위해 → 해당 사이트에서만 사용**
- 인터넷 상에서는 사용 불가. 로컬 사이트 내에서만 사용

### ✔️ 멀티캐스트 주소

- **인터페이스 그룹을 식별**하는 주소
  - 임의의 멀티캐스트 주소로 패킷을 전송하는 경우 → 해당 멀티캐스트 그룹에 등록된 모든 호스트가 패킷을 받음
- 동일한 물리적 네트워크에 연결되어 있지 않는 경우에도 패킷 전달
- 상위 8bit는 모두 1로 되어있음
- 동일한 prefix 공유 여부와는 무관

### ✔️ 예약된 멀티캐스트 주소

멀티캐스트 그룹에 할당되어서는 안 되는, 이미 정해져 있는 주소

- 모든 **노드** 멀티캐스트 주소**(flag)**: 해당되는 범위 내의 모든 IPv6 노드를 식별하는 주소
- 모든 **라우터** 멀티캐스트 주소**(scope)**: 해당되는 범위 내 모든 IPv6 라우터를 식별하는 주소

### ✔️ 애니캐스트 주소

- 해당 그룹에 속하는 인터페이스 중 가장 가까운 거리
  - 라우팅 프로토콜에 의해 설정되는 네트워크상의 가장 짧은 거리에 있는 인터페이스에게만 패킷이 전달
- 서브 네트워크상의 가장 가까운 자원을 찾아내기 위한 수단으로도 사용
- 호스트의 주소 및 발신지의 주소로 사용될 수 X

### ✔️ 미지정(Unspectified) 주소

- 0:0:0:0:0:0 혹은 ::
- 노드가 자신의 주소를 알 수 없을 때 이를 알아내기 위해 사용
  - 미지정 주소를 발신지 주소필드에 사용하여 → 자신의 주소를 얻음
- 목적지 주소로 사용 불가능하며, 어떠한 노드에도 할당되지 않음

### ✔️ 루프백(loopback) 주소

- 0:0:0:0:0:0:0:1 혹은 ::1
- IPv4의 127.0.0.1(http://localhost.com)과 같음
- 호스트의 주소 및 발신지의 주소로 사용될 수 없음

### ✔️ IPv4 주소를 포함한 IPv6 주소

- IPv4 호환 주소
- IPv6 패킷이 IPv4 패킷을 경유하고자 할 때
- 128 비트 중 상위 96비트를 0으로 하고 나머지 32bit를 IPv4 주소로 사용

### ✔️ IPv4 매핑 주소

- 호스트가 IPv6를 지원하지 않는 경우 → IPv6 네트워크에서 IPv4 호스트를 식별하기 위한 주소
- IPv4 호스트들의 주소를 → IPv6 주소로 변환할 때 사용하는 주소
- 상위 80비트를 0으로 하고
  다음 16bit를 1로, 나머지 32bit를 IPv4 주소로 사용

> [!NOTE]
> 로컬 유니캐스트 주소: 인터넷에서 사용할 수 없고 자기자신만 테스트해볼 수 있는 주소
> 멀티캐스트 주소 scope 범위
>
> 애니캐스트는 one-to-many.
> 가장 가까운 놈한테 보내주는 것
> (멀티캐스트는 자신에 속해 있는 놈에도. 다른 그룹에 있는 놈들에도 보낼 수 있음)
